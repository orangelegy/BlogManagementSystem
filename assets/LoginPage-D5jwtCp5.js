import{r as _,ac as N,bO as z,w as F,o as p,j as d,k as e,K as a,h as i,aE as S,a1 as C,aa as t,U as x,bQ as M,aO as U,bR as O,ah as I,bS as w,an as P,ao as T}from"./index-RpjzAqvV.js";import{E as j,v as D}from"./el-checkbox-BF0Gu_22.js";import{a as Q,E as A}from"./el-col-BKjSKCxJ.js";import{E as G,a as H}from"./el-form-item-BR5fkg98.js";import{E as J}from"./el-link-EVEWGkWY.js";import{_ as W,E as X}from"./_plugin-vue_export-helper-BN3ahJT3.js";import"./el-input-Bt3hWCk1.js";import"./el-message-CyBK-AcX.js";import{E as Y}from"./index-Bjb3HdCj.js";import"./isEqual-BmhHDQ0d.js";const L=m=>(P("data-v-8343b054"),m=m(),T(),m),Z=L(()=>x("h1",null,"注册",-1)),ee=L(()=>x("h1",null,"登录",-1)),ae={class:"flex"},oe={__name:"LoginPage",setup(m){const u=_(!1),f=_(!1),c=_(),o=_({username:"",password:"",repassword:""}),y={username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:5,max:10,message:"用户名必须为 5-10 位的字符",trigger:"change"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{pattern:/^\S{6,15}$/,message:"密码必须是 6-15位 的非空字符",trigger:"change"}],repassword:[{required:!0,message:"请输入密码",trigger:"blur"},{pattern:/^\S{6,15}$/,message:"密码必须是 6-15位 的非空字符",trigger:"change"},{validator:(v,s,l)=>{s!==o.value.password?l(new Error("两次输入的密码不一致")):l()}}]},V=async()=>{f.value=!0,await c.value.validate(),await M(o.value),U.success("注册成功"),u.value=!1},R=N(),B=z(),k=async()=>{f.value=!0,await c.value.validate();const v=await O(o.value);R.setToken(v.data.token),U.success("登录成功"),B.push("/")};return F(u,()=>{o.value={username:"",password:"",repassword:""}}),(v,s)=>{const l=G,n=Y,E=X,g=J,b=H,K=j,$=A,q=Q,h=D;return p(),d(q,{class:"login-page"},{default:e(()=>[a($,{span:8,offset:8,class:"form"},{default:e(()=>[u.value?(p(),d(b,{key:0,model:o.value,rules:y,ref_key:"form",ref:c,size:"large",autocomplete:"off"},{default:e(()=>[a(l,null,{default:e(()=>[Z]),_:1}),a(l,{prop:"username"},{default:e(()=>[a(n,{modelValue:o.value.username,"onUpdate:modelValue":s[0]||(s[0]=r=>o.value.username=r),"prefix-icon":i(I),placeholder:"请输入用户名"},null,8,["modelValue","prefix-icon"])]),_:1}),a(l,{prop:"password"},{default:e(()=>[a(n,{modelValue:o.value.password,"onUpdate:modelValue":s[1]||(s[1]=r=>o.value.password=r),"prefix-icon":i(w),type:"password",placeholder:"请输入密码"},null,8,["modelValue","prefix-icon"])]),_:1}),a(l,{prop:"repassword"},{default:e(()=>[a(n,{modelValue:o.value.repassword,"onUpdate:modelValue":s[2]||(s[2]=r=>o.value.repassword=r),onKeyup:S(V,["enter"]),"prefix-icon":i(w),type:"password",placeholder:"请确认密码"},null,8,["modelValue","prefix-icon"])]),_:1}),a(l,null,{default:e(()=>[C((p(),d(E,{onClick:V,class:"button",type:"primary","auto-insert-space":""},{default:e(()=>[t(" 注册 ")]),_:1})),[[h,f.value]])]),_:1}),a(l,{class:"flex"},{default:e(()=>[a(g,{type:"info",underline:!1,onClick:s[3]||(s[3]=r=>u.value=!1)},{default:e(()=>[t(" ← 返回 ")]),_:1})]),_:1})]),_:1},8,["model"])):(p(),d(b,{key:1,model:o.value,rules:y,ref_key:"form",ref:c,size:"large",autocomplete:"off"},{default:e(()=>[a(l,null,{default:e(()=>[ee]),_:1}),a(l,{prop:"username"},{default:e(()=>[a(n,{modelValue:o.value.username,"onUpdate:modelValue":s[4]||(s[4]=r=>o.value.username=r),"prefix-icon":i(I),placeholder:"请输入用户名"},null,8,["modelValue","prefix-icon"])]),_:1}),a(l,{prop:"password"},{default:e(()=>[a(n,{modelValue:o.value.password,"onUpdate:modelValue":s[5]||(s[5]=r=>o.value.password=r),onKeyup:S(k,["enter"]),name:"password","prefix-icon":i(w),type:"password",placeholder:"请输入密码"},null,8,["modelValue","prefix-icon"])]),_:1}),a(l,{class:"flex"},{default:e(()=>[x("div",ae,[a(K,null,{default:e(()=>[t("记住我")]),_:1}),a(g,{type:"primary",underline:!1},{default:e(()=>[t("忘记密码？")]),_:1})])]),_:1}),a(l,null,{default:e(()=>[C((p(),d(E,{onClick:k,class:"button",type:"primary","auto-insert-space":""},{default:e(()=>[t("登录")]),_:1})),[[h,f.value]])]),_:1}),a(l,{class:"flex"},{default:e(()=>[a(g,{type:"info",underline:!1,onClick:s[6]||(s[6]=r=>u.value=!0)},{default:e(()=>[t(" 注册 → ")]),_:1})]),_:1})]),_:1},8,["model"]))]),_:1})]),_:1})}}},fe=W(oe,[["__scopeId","data-v-8343b054"]]);export{fe as default};
